{#
Config Form Component
Provides pipeline configuration interface with stage selection and presets

Parameters:
  - preset_btn_class: CSS class for preset buttons (default: 'btn preset-btn')
  - stage_checkbox_class: CSS class for stage checkboxes (default: 'checkbox-label')
  - form_class: Additional CSS classes for the form element
#}
{% macro config_form(preset_btn_class='btn preset-btn', stage_checkbox_class='checkbox-label', form_class='') %}
<form id="config-form" class="{{ form_class }}">
    <!-- Presets -->
    <div class="form-group presets">
        <label>Quick Presets</label>
        <div class="preset-buttons">
            <button type="button" class="{{ preset_btn_class }}" data-preset="quick">Quick Preview</button>
            <button type="button" class="{{ preset_btn_class }} active" data-preset="full">Full VFX</button>
            <button type="button" class="{{ preset_btn_class }}" data-preset="all">Everything</button>
        </div>
    </div>

    <!-- Stage Checkboxes -->
    <div class="form-group">
        <label class="{{ stage_checkbox_class }}">
            <input type="checkbox" name="stage" value="depth" checked>
            <span class="checkbox-text">Generate Depth Maps</span>
            <span class="checkbox-note">Creates depth information for each frame</span>
        </label>
        <label class="{{ stage_checkbox_class }}">
            <input type="checkbox" name="stage" value="roto" id="stage-roto" checked>
            <span class="checkbox-text">Segment Objects (Roto)</span>
            <span class="checkbox-note">Detect and mask objects/people in frames</span>
        </label>

        <!-- Roto Prompt (conditionally shown) -->
        <div id="roto-prompt-wrapper" class="roto-prompt-wrapper">
            <label for="roto-prompt">Segmentation Prompt</label>
            <input
                type="text"
                id="roto-prompt"
                name="roto-prompt"
                placeholder="person, car, building..."
                value="person"
            >
        </div>

        <label class="{{ stage_checkbox_class }}">
            <input type="checkbox" name="stage" value="mama">
            <span class="checkbox-text">Refine Person Mattes (VideoMaMa)</span>
            <span class="checkbox-note">Requires Roto with person masks</span>
        </label>
        <label class="{{ stage_checkbox_class }}">
            <input type="checkbox" name="stage" value="cleanplate">
            <span class="checkbox-text">Generate Clean Plates</span>
            <span class="checkbox-note">Create background without objects</span>
        </label>
        <label class="{{ stage_checkbox_class }}">
            <input type="checkbox" name="stage" value="colmap">
            <span class="checkbox-text">Track Camera (COLMAP)</span>
            <span class="checkbox-note">Calculate camera movement and position</span>
        </label>
        <label class="{{ stage_checkbox_class }}">
            <input type="checkbox" name="stage" value="gsir" disabled>
            <span class="checkbox-text">Reconstruct 3D Scene (GSIR)</span>
            <span class="checkbox-note">Requires COLMAP camera tracking</span>
        </label>
        <label class="{{ stage_checkbox_class }}">
            <input type="checkbox" name="stage" value="mocap" disabled>
            <span class="checkbox-text">Extract Motion (MoCap)</span>
            <span class="checkbox-note">Requires COLMAP camera tracking</span>
        </label>
    </div>

    <!-- Skip Existing -->
    <div class="form-group">
        <label class="checkbox-label">
            <input type="checkbox" id="skip-existing" name="skip-existing">
            <span class="checkbox-text">Skip Existing Outputs</span>
            <span class="checkbox-note">Don't regenerate existing files</span>
        </label>
    </div>

    <!-- Time Estimate -->
    <div class="time-estimate">
        <strong>Estimated Time:</strong>
        <span id="time-estimate">~5 minutes</span>
    </div>

    <!-- Submit Button -->
    <button type="submit" class="btn btn-primary btn-large">Start Processing</button>
</form>
{% endmacro %}
