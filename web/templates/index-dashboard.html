<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shot Gopher - VFX Pipeline</title>
    <link rel="stylesheet" href="/static/css/style-dashboard.css">
</head>
<body>
    <div class="dashboard">
        <!-- Top Bar -->
        <nav class="topbar">
            <div class="topbar-left">
                <h1>Shot Gopher</h1>
                <span class="version">v0.1 alpha</span>
            </div>
            <div class="topbar-right">
                <div id="system-status" class="sys-status">
                    <span class="sys-label">COMFYUI</span>
                    <span class="sys-indicator"></span>
                    <span class="status-text sys-label">--</span>
                </div>
                <button type="button" id="shutdown-btn" class="shutdown-link" aria-label="Shutdown platform" title="Shutdown the VFX Pipeline platform">
                    Shutdown
                </button>
            </div>
        </nav>

        <!-- Main Dashboard Grid -->
        <div class="dashboard-grid">
            <!-- Left Column: Upload & Stats -->
            <div class="col-left">
                <!-- Upload Card -->
                <div class="card upload-card">
                    <div class="card-header">
                        <h2>NEW PROJECT</h2>
                    </div>
                    <div class="card-body">
                        <div id="drop-zone" class="dropzone">
                            <input type="file" id="file-input" accept=".mp4,.mov,.avi,.mkv,.webm,.mxf" hidden>
                            <div class="dropzone-icon">üìÅ</div>
                            <div class="dropzone-text">Drop video or <button type="button" id="browse-btn" class="link">browse</button></div>
                        </div>

                        <div id="upload-progress" class="upload-bar hidden">
                            <div class="upload-info">
                                <span>Uploading</span>
                                <span id="upload-percent-text">0%</span>
                            </div>
                            <div class="bar">
                                <div class="bar-fill" id="upload-progress-fill"></div>
                            </div>
                            <div class="upload-file" id="upload-filename"></div>
                        </div>
                    </div>
                </div>

                <!-- System Info -->
                <div class="system-info" id="system-info">
                    <div class="info-row">
                        <span class="info-label">OS</span>
                        <span class="info-value" id="sys-os">--</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Disk</span>
                        <span class="info-value" id="sys-disk">--</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Projects</span>
                        <span class="info-value" id="sys-projects">--</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">GPU</span>
                        <span class="info-value" id="sys-gpu">--</span>
                    </div>
                </div>

                <!-- Video Info (shown when project selected) -->
                <div id="video-info-section" class="system-info hidden">
                    <div class="info-header">VIDEO</div>
                    <div class="info-row">
                        <span class="info-label">Resolution</span>
                        <span class="info-value" id="video-resolution">--</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Frames</span>
                        <span class="info-value" id="video-frames">--</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">FPS</span>
                        <span class="info-value" id="video-fps">--</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Duration</span>
                        <span class="info-value" id="video-duration">--</span>
                    </div>
                </div>

            </div>

            <!-- Right Column: Projects & Activity -->
            <div class="col-right">
                <!-- Projects Card -->
                <div class="card projects-card">
                    <div class="card-header">
                        <h2>PROJECTS</h2>
                    </div>
                    <div class="card-body">
                        <div id="projects-list" class="projects-scroll">
                            <div class="loading-text">Loading...</div>
                        </div>
                    </div>
                </div>

                <!-- Project Detail Panel (shown when project selected) -->
                <div id="project-detail-panel" class="card detail-card hidden">
                    <div class="card-header">
                        <button type="button" id="delete-project-btn" class="btn-action btn-danger" title="Delete project">DELETE</button>
                        <h2>PROJECT: <span id="detail-project-name">--</span></h2>
                        <span id="stages-counter" class="stages-counter">0/9</span>
                        <div class="detail-actions">
                            <button type="button" id="open-folder-btn" class="btn-action" title="Open in file manager">FOLDER</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <!-- Pipeline Stages Status -->
                        <div class="detail-section">
                            <div class="section-label">PIPELINE STAGES</div>
                            <div id="detail-stages" class="stages-status">
                                <!-- Populated by JS -->
                            </div>
                        </div>

                        <!-- VRAM Info -->
                        <div id="vram-info-section" class="detail-section hidden">
                            <div class="section-label">GPU MEMORY</div>
                            <div id="vram-info" class="vram-display">
                                <!-- Populated by JS -->
                            </div>
                        </div>

                        <!-- Quick Actions -->
                        <div class="detail-section">
                            <button type="button" id="reprocess-btn" class="btn-reprocess">REPROCESS SELECTED STAGES</button>
                            <button type="button" id="interactive-complete-btn" class="btn-interactive-complete hidden">COMPLETE INTERACTIVE ROTO</button>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <!-- Error Toast -->
        <div id="error-toast" class="toast hidden">
            <span class="toast-icon">‚ö†</span>
            <span id="error-message" class="toast-message"></span>
            <button type="button" id="error-close" class="toast-close">√ó</button>
        </div>

        <!-- Overwrite Confirmation Dialog -->
        <div id="overwrite-dialog" class="dialog-overlay hidden">
            <div class="dialog-box">
                <div class="dialog-message">
                    Project "<span id="overwrite-project-name"></span>" already exists. Would you like to write over it?
                </div>
                <div class="dialog-buttons">
                    <div class="dialog-buttons-row">
                        <button type="button" id="overwrite-yes" class="dialog-btn dialog-btn-primary">Yes</button>
                        <button type="button" id="overwrite-no" class="dialog-btn">No</button>
                    </div>
                    <button type="button" id="overwrite-cancel" class="dialog-btn dialog-btn-cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module" src="/static/js/main.js"></script>
</body>
</html>
